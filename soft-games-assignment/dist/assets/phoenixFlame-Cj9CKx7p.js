import{S as at,c as v,b as B,U as dt,P,B as A,A as xt,a as gt,R as vt,d as yt}from"./main-BUeuKrOs.js";class b extends at{constructor(t,e=!0){super(t[0]instanceof v?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(B.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(B.shared.add(this.update,this,dt.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(v.from(t[i]));return new b(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(v.from(t[i]));return new b(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof v)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(B.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(B.shared.add(this.update,this),this._isConnectedToTicker=!0))}}/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class g{constructor(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,i?this.ease=typeof i=="function"?i:lt(i):this.ease=null}static createList(t){if("list"in t){const i=t.list;let n;const{value:r,time:a}=i[0],o=n=new g(typeof r=="string"?M(r):r,a,t.ease);if(i.length>2||i.length===2&&i[1].value!==r)for(let h=1;h<i.length;++h){const{value:m,time:p}=i[h];n.next=new g(typeof m=="string"?M(m):m,p),n=n.next}return o.isStepped=!!t.isStepped,o}const e=new g(typeof t.start=="string"?M(t.start):t.start,0);return t.end!==t.start&&(e.next=new g(typeof t.end=="string"?M(t.end):t.end,1)),e}}let F=v.from;const x=Math.PI/180;function y(s,t){if(!s)return;const e=Math.sin(s),i=Math.cos(s),n=t.x*i-t.y*e,r=t.x*e+t.y*i;t.x=n,t.y=r}function k(s,t,e){return s<<16|t<<8|e}function ot(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function _t(s){const t=1/ot(s);s.x*=t,s.y*=t}function ht(s,t){s.x*=t,s.y*=t}function M(s,t){t||(t={}),s.charAt(0)==="#"?s=s.substr(1):s.indexOf("0x")===0&&(s=s.substr(2));let e;return s.length===8&&(e=s.substr(0,2),s=s.substr(2)),t.r=parseInt(s.substr(0,2),16),t.g=parseInt(s.substr(2,2),16),t.b=parseInt(s.substr(4,2),16),e&&(t.a=parseInt(e,16)),t}function lt(s){const t=s.length,e=1/t;return function(i){const n=t*i|0,r=(i-n*e)*t,a=s[n]||s[t-1];return a.s+r*(2*(1-r)*(a.cp-a.s)+r*(a.e-a.s))}}function Pt(s){return s?(s=s.toUpperCase().replace(/ /g,"_"),A[s]||A.NORMAL):A.NORMAL}class I extends at{constructor(t){super(),this.prevChild=this.nextChild=null,this.emitter=t,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(t){this.maxLife=t,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var c;(function(s){s[s.Spawn=0]="Spawn",s[s.Normal=2]="Normal",s[s.Late=5]="Late"})(c||(c={}));const U=B.shared,w=Symbol("Position particle per emitter position");class l{constructor(t,e){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new P,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new P,this._prevEmitterPos=new P,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&this.init(e),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(t){l.knownBehaviors[t.type]=t}get frequency(){return this._frequency}set frequency(t){typeof t=="number"&&t>0?this._frequency=t:this._frequency=1}get parent(){return this._parent}set parent(t){this.cleanup(),this._parent=t}init(t){if(!t)return;this.cleanup(),this._origConfig=t,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,t.ease?this.customEase=typeof t.ease=="function"?t.ease:lt(t.ease):this.customEase=null,this.particlesPerWave=1,t.particlesPerWave&&t.particlesPerWave>1&&(this.particlesPerWave=t.particlesPerWave),this.frequency=t.frequency,this.spawnChance=typeof t.spawnChance=="number"&&t.spawnChance>0?t.spawnChance:1,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos.set(0),t.pos?this.spawnPos.copyFrom(t.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=t.emit===void 0?!0:!!t.emit,this.autoUpdate=!!t.autoUpdate;const e=t.behaviors.map(i=>{const n=l.knownBehaviors[i.type];return n?new n(i.config):(console.error(`Unknown behavior: ${i.type}`),null)}).filter(i=>!!i);e.push(w),e.sort((i,n)=>i===w?n.order===c.Spawn?1:-1:n===w?i.order===c.Spawn?-1:1:i.order-n.order),this.initBehaviors=e.slice(),this.updateBehaviors=e.filter(i=>i!==w&&i.updateParticle),this.recycleBehaviors=e.filter(i=>i!==w&&i.recycleParticle)}getBehavior(t){return l.knownBehaviors[t]&&this.initBehaviors.find(e=>e instanceof l.knownBehaviors[t])||null}fillPool(t){for(;t>0;--t){const e=new I(this);e.next=this._poolFirst,this._poolFirst=e}}recycle(t,e=!1){for(let i=0;i<this.recycleBehaviors.length;++i)this.recycleBehaviors[i].recycleParticle(t,!e);t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount}rotate(t){if(this.rotation===t)return;const e=t-this.rotation;this.rotation=t,y(e,this.spawnPos),this._posChanged=!0}updateSpawnPos(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e}updateOwnerPos(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){this._autoUpdate&&!t?U.remove(this.update,this):!this._autoUpdate&&t&&U.add(this.update,this),this._autoUpdate=!!t}playOnceAndDestroy(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t}playOnce(t){this.emit=!0,this._completeCallback=t}update(t){if(this._autoUpdate&&(t=U.elapsedMS*.001),!this._parent)return;for(let a=this._activeParticlesFirst,o;a;a=o)if(o=a.next,a.age+=t,a.age>a.maxLife||a.age<0)this.recycle(a);else{let h=a.age*a.oneOverLife;this.customEase&&(this.customEase.length===4?h=this.customEase(h,0,1,1):h=this.customEase(h)),a.agePercent=h;for(let m=0;m<this.updateBehaviors.length;++m)if(this.updateBehaviors[m].updateParticle(a,t)){this.recycle(a);break}}let e,i;this._prevPosIsValid&&(e=this._prevEmitterPos.x,i=this._prevEmitterPos.y);const n=this.ownerPos.x+this.spawnPos.x,r=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let a,o;if(this._prevPosIsValid&&this._posChanged){const p=1+this._spawnTimer/t;a=(n-e)*p+e,o=(r-i)*p+i}else a=n,o=r;let h=null,m=null;for(let p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),_=0;_<p;++_){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let u;if(this.minLifetime===this.maxLifetime?u=this.minLifetime:u=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=u)continue;let f;this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new I(this),f.init(u),this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f),h?(m.next=f,f.prev=m,m=f):m=h=f,++this.particleCount}if(h){this._activeParticlesLast?(this._activeParticlesLast.next=h,h.prev=this._activeParticlesLast,this._activeParticlesLast=m):(this._activeParticlesFirst=h,this._activeParticlesLast=m);for(let p=0;p<this.initBehaviors.length;++p){const _=this.initBehaviors[p];if(_===w)for(let u=h,f;u;u=f){f=u.next,this.rotation!==0&&(y(this.rotation,u.position),u.rotation+=this.rotation),u.position.x+=a,u.position.y+=o,u.age+=-this._spawnTimer;let L=u.age*u.oneOverLife;this.customEase&&(this.customEase.length===4?L=this.customEase(L,0,1,1):L=this.customEase(L)),u.agePercent=L}else _.initParticles(h)}for(let p=h,_;p;p=_){_=p.next;for(let u=0;u<this.updateBehaviors.length;++u)if(this.updateBehaviors[u].updateParticle(p,-this._spawnTimer)){this.recycle(p);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=n,this._prevEmitterPos.y=r,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const a=this._completeCallback;this._completeCallback=null,a()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const t=this.ownerPos.x+this.spawnPos.x,e=this.ownerPos.y+this.spawnPos.y;let i=null,n=null;for(let r=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),a=0;a<r;++a){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let o;this._poolFirst?(o=this._poolFirst,this._poolFirst=this._poolFirst.next,o.next=null):o=new I(this);let h;this.minLifetime===this.maxLifetime?h=this.minLifetime:h=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,o.init(h),this.addAtBack?this._parent.addChildAt(o,0):this._parent.addChild(o),i?(n.next=o,o.prev=n,n=o):n=i=o,++this.particleCount}if(i){this._activeParticlesLast?(this._activeParticlesLast.next=i,i.prev=this._activeParticlesLast,this._activeParticlesLast=n):(this._activeParticlesFirst=i,this._activeParticlesLast=n);for(let r=0;r<this.initBehaviors.length;++r){const a=this.initBehaviors[r];if(a===w)for(let o=i,h;o;o=h)h=o.next,this.rotation!==0&&(y(this.rotation,o.position),o.rotation+=this.rotation),o.position.x+=t,o.position.y+=e;else a.initParticles(i)}}}cleanup(){let t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let t;for(let e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}l.knownBehaviors={};class N{constructor(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}getRandPos(t){t.x=Math.random()*this.w+this.x,t.y=Math.random()*this.h+this.y}}N.type="rect";N.editorConfig=null;class R{constructor(t){this.x=t.x||0,this.y=t.y||0,this.radius=t.radius,this.innerRadius=t.innerRadius||0,this.rotation=!!t.affectRotation}getRandPos(t){this.innerRadius!==this.radius?t.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:t.x=this.radius,t.y=0;const e=Math.random()*Math.PI*2;this.rotation&&(t.rotation+=e),y(e,t.position),t.position.x+=this.x,t.position.y+=this.y}}R.type="torus";R.editorConfig=null;class D{constructor(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}init(t){if(!t||!t.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(t[0]))for(let e=0;e<t.length;++e){const i=t[e];let n=i[0];for(let r=1;r<i.length;++r){const a=i[r];this.segments.push({p1:n,p2:a,l:0}),n=a}}else{let e=t[0];for(let i=1;i<t.length;++i){const n=t[i];this.segments.push({p1:e,p2:n,l:0}),e=n}}for(let e=0;e<this.segments.length;++e){const{p1:i,p2:n}=this.segments[e],r=Math.sqrt((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y));this.segments[e].l=r,this.totalLength+=r,this.countingLengths.push(this.totalLength)}}getRandPos(t){const e=Math.random()*this.totalLength;let i,n;if(this.segments.length===1)i=this.segments[0],n=e;else for(let o=0;o<this.countingLengths.length;++o)if(e<this.countingLengths[o]){i=this.segments[o],n=o===0?e:e-this.countingLengths[o-1];break}n/=i.l||1;const{p1:r,p2:a}=i;t.x=r.x+n*(a.x-r.x),t.y=r.y+n*(a.y-r.y)}}D.type="polygonalChain";D.editorConfig=null;class O{constructor(t){var e;this.order=c.Late,this.minStart=t.minStart,this.maxStart=t.maxStart,this.accel=t.accel,this.rotate=!!t.rotate,this.maxSpeed=(e=t.maxSpeed)!==null&&e!==void 0?e:0}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.maxStart-this.minStart)+this.minStart;e.config.velocity?e.config.velocity.set(i,0):e.config.velocity=new P(i,0),y(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity,n=i.x,r=i.y;if(i.x+=this.accel.x*e,i.y+=this.accel.y*e,this.maxSpeed){const a=ot(i);a>this.maxSpeed&&ht(i,this.maxSpeed/a)}t.x+=(n+i.x)/2*e,t.y+=(r+i.y)/2*e,this.rotate&&(t.rotation=Math.atan2(i.y,i.x))}}O.type="moveAcceleration";O.editorConfig=null;function wt(s){return this.ease&&(s=this.ease(s)),(this.first.next.value-this.first.value)*s+this.first.value}function Ct(s){this.ease&&(s=this.ease(s));const t=this.first.value,e=this.first.next.value,i=(e.r-t.r)*s+t.r,n=(e.g-t.g)*s+t.g,r=(e.b-t.b)*s+t.b;return k(i,n,r)}function St(s){this.ease&&(s=this.ease(s));let t=this.first,e=t.next;for(;s>e.time;)t=e,e=e.next;return s=(s-t.time)/(e.time-t.time),(e.value-t.value)*s+t.value}function Lt(s){this.ease&&(s=this.ease(s));let t=this.first,e=t.next;for(;s>e.time;)t=e,e=e.next;s=(s-t.time)/(e.time-t.time);const i=t.value,n=e.value,r=(n.r-i.r)*s+i.r,a=(n.g-i.g)*s+i.g,o=(n.b-i.b)*s+i.b;return k(r,a,o)}function Bt(s){this.ease&&(s=this.ease(s));let t=this.first;for(;t.next&&s>t.next.time;)t=t.next;return t.value}function Ft(s){this.ease&&(s=this.ease(s));let t=this.first;for(;t.next&&s>t.next.time;)t=t.next;const e=t.value;return k(e.r,e.g,e.b)}class T{constructor(t=!1){this.first=null,this.isColor=!!t,this.interpolate=null,this.ease=null}reset(t){this.first=t,t.next&&t.next.time>=1?this.interpolate=this.isColor?Ct:wt:t.isStepped?this.interpolate=this.isColor?Ft:Bt:this.interpolate=this.isColor?Lt:St,this.ease=this.first.ease}}class q{constructor(t){this.order=c.Normal,this.list=new T(!1),this.list.reset(g.createList(t.alpha))}initParticles(t){let e=t;for(;e;)e.alpha=this.list.first.value,e=e.next}updateParticle(t){t.alpha=this.list.interpolate(t.agePercent)}}q.type="alpha";q.editorConfig=null;class V{constructor(t){this.order=c.Normal,this.value=t.alpha}initParticles(t){let e=t;for(;e;)e.alpha=this.value,e=e.next}}V.type="alphaStatic";V.editorConfig=null;function ct(s){const t=[];for(let e=0;e<s.length;++e){let i=s[e];if(typeof i=="string")t.push(F(i));else if(i instanceof v)t.push(i);else{let n=i.count||1;for(typeof i.texture=="string"?i=F(i.texture):i=i.texture;n>0;--n)t.push(i)}}return t}class W{constructor(t){this.order=c.Normal,this.anims=[];for(let e=0;e<t.anims.length;++e){const i=t.anims[e],n=ct(i.textures),r=i.framerate<0?-1:i.framerate>0?i.framerate:60,a={textures:n,duration:r>0?n.length/r:0,framerate:r,loop:r>0?!!i.loop:!1};this.anims.push(a)}}initParticles(t){let e=t;for(;e;){const i=Math.floor(Math.random()*this.anims.length),n=e.config.anim=this.anims[i];e.texture=n.textures[0],e.config.animElapsed=0,n.framerate===-1?(e.config.animDuration=e.maxLife,e.config.animFramerate=n.textures.length/e.maxLife):(e.config.animDuration=n.duration,e.config.animFramerate=n.framerate),e=e.next}}updateParticle(t,e){const i=t.config,n=i.anim;i.animElapsed+=e,i.animElapsed>=i.animDuration&&(i.anim.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const r=i.animElapsed*i.animFramerate+1e-7|0;t.texture=n.textures[r]||n.textures[n.textures.length-1]||v.EMPTY}}W.type="animatedRandom";W.editorConfig=null;class Y{constructor(t){this.order=c.Normal;const e=t.anim,i=ct(e.textures),n=e.framerate<0?-1:e.framerate>0?e.framerate:60;this.anim={textures:i,duration:n>0?i.length/n:0,framerate:n,loop:n>0?!!e.loop:!1}}initParticles(t){let e=t;const i=this.anim;for(;e;)e.texture=i.textures[0],e.config.animElapsed=0,i.framerate===-1?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}updateParticle(t,e){const i=this.anim,n=t.config;n.animElapsed+=e,n.animElapsed>=n.animDuration&&(i.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const r=n.animElapsed*n.animFramerate+1e-7|0;t.texture=i.textures[r]||i.textures[i.textures.length-1]||v.EMPTY}}Y.type="animatedSingle";Y.editorConfig=null;class G{constructor(t){this.order=c.Normal,this.value=t.blendMode}initParticles(t){let e=t;for(;e;)e.blendMode=Pt(this.value),e=e.next}}G.type="blendMode";G.editorConfig=null;class H{constructor(t){this.order=c.Spawn,this.spacing=t.spacing*x,this.start=t.start*x,this.distance=t.distance}initParticles(t){let e=0,i=t;for(;i;){let n;this.spacing?n=this.start+this.spacing*e:n=Math.random()*Math.PI*2,i.rotation=n,this.distance&&(i.position.x=this.distance,y(n,i.position)),i=i.next,++e}}}H.type="spawnBurst";H.editorConfig=null;class ${constructor(t){this.order=c.Normal,this.list=new T(!0),this.list.reset(g.createList(t.color))}initParticles(t){let e=t;const i=this.list.first.value,n=k(i.r,i.g,i.b);for(;e;)e.tint=n,e=e.next}updateParticle(t){t.tint=this.list.interpolate(t.agePercent)}}$.type="color";$.editorConfig=null;class X{constructor(t){this.order=c.Normal;let e=t.color;e.charAt(0)==="#"?e=e.substr(1):e.indexOf("0x")===0&&(e=e.substr(2)),this.value=parseInt(e,16)}initParticles(t){let e=t;for(;e;)e.tint=this.value,e=e.next}}X.type="colorStatic";X.editorConfig=null;class j{constructor(t){this.order=c.Normal,this.index=0,this.textures=t.textures.map(e=>typeof e=="string"?F(e):e)}initParticles(t){let e=t;for(;e;)e.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),e=e.next}}j.type="textureOrdered";j.editorConfig=null;const C=new P,ut=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],Tt=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(ut).join("|"),"g");function Mt(s){const t=s.match(Tt);for(let e=t.length-1;e>=0;--e)ut.indexOf(t[e])>=0&&(t[e]=`Math.${t[e]}`);return s=t.join(""),new Function("x",`return ${s};`)}class Q{constructor(t){var e;if(this.order=c.Late,t.path)if(typeof t.path=="function")this.path=t.path;else try{this.path=Mt(t.path)}catch{this.path=null}else this.path=i=>i;this.list=new T(!1),this.list.reset(g.createList(t.speed)),this.minMult=(e=t.minMult)!==null&&e!==void 0?e:1}initParticles(t){let e=t;for(;e;){e.config.initRotation=e.rotation,e.config.initPosition?e.config.initPosition.copyFrom(e.position):e.config.initPosition=new P(e.x,e.y),e.config.movement=0;const i=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=i,e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult;t.config.movement+=i*e,C.x=t.config.movement,C.y=this.path(C.x),y(t.config.initRotation,C),t.position.x=t.config.initPosition.x+C.x,t.position.y=t.config.initPosition.y+C.y}}Q.type="movePath";Q.editorConfig=null;class z{constructor(){this.order=c.Spawn}initParticles(t){}}z.type="spawnPoint";z.editorConfig=null;class Z{constructor(t){this.order=c.Normal,this.textures=t.textures.map(e=>typeof e=="string"?F(e):e)}initParticles(t){let e=t;for(;e;){const i=Math.floor(Math.random()*this.textures.length);e.texture=this.textures[i],e=e.next}}}Z.type="textureRandom";Z.editorConfig=null;class J{constructor(t){this.order=c.Normal,this.minStart=t.minStart*x,this.maxStart=t.maxStart*x,this.minSpeed=t.minSpeed*x,this.maxSpeed=t.maxSpeed*x,this.accel=t.accel*x}initParticles(t){let e=t;for(;e;)this.minStart===this.maxStart?e.rotation+=this.maxStart:e.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,e.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,e=e.next}updateParticle(t,e){if(this.accel){const i=t.config.rotSpeed;t.config.rotSpeed+=this.accel*e,t.rotation+=(t.config.rotSpeed+i)/2*e}else t.rotation+=t.config.rotSpeed*e}}J.type="rotation";J.editorConfig=null;class K{constructor(t){this.order=c.Normal,this.min=t.min*x,this.max=t.max*x}initParticles(t){let e=t;for(;e;)this.min===this.max?e.rotation+=this.max:e.rotation+=Math.random()*(this.max-this.min)+this.min,e=e.next}}K.type="rotationStatic";K.editorConfig=null;class tt{constructor(t){this.order=c.Late+1,this.rotation=(t.rotation||0)*x}initParticles(t){let e=t;for(;e;)e.rotation=this.rotation,e=e.next}}tt.type="noRotation";tt.editorConfig=null;class et{constructor(t){var e;this.order=c.Normal,this.list=new T(!1),this.list.reset(g.createList(t.scale)),this.minMult=(e=t.minMult)!==null&&e!==void 0?e:1}initParticles(t){let e=t;for(;e;){const i=Math.random()*(1-this.minMult)+this.minMult;e.config.scaleMult=i,e.scale.x=e.scale.y=this.list.first.value*i,e=e.next}}updateParticle(t){t.scale.x=t.scale.y=this.list.interpolate(t.agePercent)*t.config.scaleMult}}et.type="scale";et.editorConfig=null;class it{constructor(t){this.order=c.Normal,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.max-this.min)+this.min;e.scale.x=e.scale.y=i,e=e.next}}}it.type="scaleStatic";it.editorConfig=null;class d{constructor(t){this.order=c.Spawn;const e=d.shapes[t.type];if(!e)throw new Error(`No shape found with type '${t.type}'`);this.shape=new e(t.data)}static registerShape(t,e){d.shapes[e||t.type]=t}initParticles(t){let e=t;for(;e;)this.shape.getRandPos(e),e=e.next}}d.type="spawnShape";d.editorConfig=null;d.shapes={};d.registerShape(D);d.registerShape(N);d.registerShape(R);d.registerShape(R,"circle");class st{constructor(t){this.order=c.Normal,this.texture=typeof t.texture=="string"?F(t.texture):t.texture}initParticles(t){let e=t;for(;e;)e.texture=this.texture,e=e.next}}st.type="textureSingle";st.editorConfig=null;class nt{constructor(t){var e;this.order=c.Late,this.list=new T(!1),this.list.reset(g.createList(t.speed)),this.minMult=(e=t.minMult)!==null&&e!==void 0?e:1}initParticles(t){let e=t;for(;e;){const i=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=i,e.config.velocity?e.config.velocity.set(this.list.first.value*i,0):e.config.velocity=new P(this.list.first.value*i,0),y(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult,n=t.config.velocity;_t(n),ht(n,i),t.x+=n.x*e,t.y+=n.y*e}}nt.type="moveSpeed";nt.editorConfig=null;class rt{constructor(t){this.order=c.Late,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.max-this.min)+this.min;e.config.velocity?e.config.velocity.set(i,0):e.config.velocity=new P(i,0),y(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity;t.x+=i.x*e,t.y+=i.y*e}}rt.type="moveSpeedStatic";rt.editorConfig=null;l.registerBehavior(O);l.registerBehavior(q);l.registerBehavior(V);l.registerBehavior(W);l.registerBehavior(Y);l.registerBehavior(G);l.registerBehavior(H);l.registerBehavior($);l.registerBehavior(X);l.registerBehavior(j);l.registerBehavior(Q);l.registerBehavior(z);l.registerBehavior(Z);l.registerBehavior(J);l.registerBehavior(K);l.registerBehavior(tt);l.registerBehavior(et);l.registerBehavior(it);l.registerBehavior(d);l.registerBehavior(st);l.registerBehavior(nt);l.registerBehavior(rt);const mt=document.getElementById("phoenixFlameCanvas"),pt=960,ft=720,S=128,E=new xt({width:pt,height:ft,backgroundColor:16777215,view:mt}),Et=document.getElementById("fullscreenButton");Et?.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():mt?.requestFullscreen()});function bt(s,t,e,i){return new l(s,{lifetime:{min:.1,max:.75},frequency:.1,spawnChance:1,particlesPerWave:1,maxParticles:9,pos:{x:e,y:i},addAtBack:!0,behaviors:[{type:"alpha",config:{alpha:{list:[{value:.7,time:0},{value:0,time:1}]}}},{type:"scale",config:{scale:{list:[{value:.75,time:0},{value:1.5,time:1}]}}},{type:"rotation",config:{accel:0,minSpeed:10,maxSpeed:10,minStart:265,maxStart:275}},{type:"noRotation",config:{rotation:0}},{type:"blendMode",config:{blendMode:"color burn"}},{type:"color",config:{color:{list:[{value:"fff191",time:0},{value:"ff622c",time:.6},{value:"111111",time:.7},{value:"333333",time:1}],isStepped:!1}}},{type:"moveSpeedStatic",config:{min:500,max:500}},{type:"spawnShape",config:{type:"torus",data:{x:0,y:0,radius:10,innerRadius:0,affectRotation:!1}}},{type:"textureSingle",config:{texture:t}}]})}async function kt(){console.log("Phoenix Flame initialized");const s=(await gt.load("resources/flame_fire.png")).baseTexture,t=Math.floor(s.width/S),e=Math.floor(s.height/S),i=[];for(let h=0;h<e;h++)for(let m=0;m<t;m++){const p=new v(s,new vt(m*S,h*S,S,S));i.push(p)}const n=new b(i);n.scale={x:3,y:3};const r=pt/2-n.width/2,a=ft/2-n.height/2;n.x=r,n.y=a,n.animationSpeed=.3,n.loop=!1,n.onComplete=()=>{n.gotoAndPlay(12)},n.play(),E.stage.addChild(n);const o=bt(E.stage,i[18],r+n.width/2,n.y+n.height/2);o.emit=!0,E.ticker.add(h=>{o.update(h*.009)}),yt(E)}await kt();
